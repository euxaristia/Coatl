.TH COATL 1 "February 2026" "Coatl" "User Commands"
.SH NAME
coatl \- build Coatl sources via selfhost and IR lanes
.SH SYNOPSIS
.B coatl
.I build input.coatl
[\fB--emit=\fRwat|asm|ir]
[\fB-o\fR \fIoutput\fR]
[\fB--toolchain=\fRauto|selfhost|ir]
[\fB--compiler\fR \fIseed.wat\fR]
.br
.B coatl
.I lower-ir input.ir
\fB-o\fR \fIoutput.wat\fR
.br
.B coatl
[\fB--help\fR|\fB-h\fR]
.br
.B coatl
[\fB--version\fR|\fB-V\fR]
.SH DESCRIPTION
\fBcoatl\fR is the command-line launcher for the Coatl compiler pipeline.
It dispatches to selfhost and IR-based toolchains.
.SH COMMANDS
.TP
.B build
Compile a \fI.coatl\fR source file. The default emission is WAT.
.TP
.B lower-ir
Lower textual Coatl IR into WAT using the external lowerer.
.SH OPTIONS
.TP
\fB--emit=\fRwat|asm|ir
Choose emitted output kind (default: \fBwat\fR).
.TP
\fB-o\fR \fIoutput\fR
Write output to the given path. If omitted, output is written to stdout.
.TP
\fB--toolchain=\fRauto|selfhost|ir
Select compilation lane. Default is \fBauto\fR.
.TP
\fB--compiler\fR \fIseed.wat\fR
Path to seed compiler module for selfhost lane.
.TP
\fB--help\fR, \fB-h\fR
Show usage help.
.TP
\fB--version\fR, \fB-V\fR
Show version string.
.SH ENVIRONMENT
.TP
\fBCOATL_TOOLCHAIN\fR
Default toolchain when \fB--toolchain\fR is omitted.
.TP
\fBCOATL_IR_FIRST_BUILD=1\fR
Force auto mode to skip selfhost-first attempt.
.TP
\fBCOATL_VERSION\fR
Fallback version string if Git metadata is unavailable.
.TP
\fBCOATL_HOME\fR
Path to Coatl runtime assets (contains \fItools/\fR and \fIselfhost/\fR).
.SH EXIT STATUS
Returns 0 on success and non-zero on error.
.SH EXAMPLES
.TP
\fBcoatl build examples/hello.coatl --emit=wat -o /tmp/hello.wat\fR
Compile to WAT.
.TP
\fBcoatl build examples/hello.coatl --emit=asm --toolchain=ir -o /tmp/hello.s\fR
Compile through the IR pipeline to x86_64 assembly.
.TP
\fBcoatl lower-ir /tmp/prog.ir -o /tmp/prog.wat\fR
Lower IR to WAT.
.TP
\fBcoatl --version\fR
Print version.
.SH SEE ALSO
Project wiki and language notes:
.br
\fBhttps://github.com/euxaristia/Coatl/wiki\fR
.br
\fBSPEC.md\fR in the Coatl repository.
